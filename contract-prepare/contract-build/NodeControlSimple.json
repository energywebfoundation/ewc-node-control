{"abi":[{"constant":false,"inputs":[{"name":"_targetValidator","type":"address"},{"name":"_dockerSha","type":"bytes"},{"name":"_dockerName","type":"string"},{"name":"_chainSpecSha","type":"bytes"},{"name":"_chainSpecUrl","type":"string"},{"name":"_isSigning","type":"bool"}],"name":"updateValidator","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"confirmUpdate","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":false,"inputs":[],"name":"renounceOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"constant":true,"inputs":[{"name":"_targetValidator","type":"address"}],"name":"retrieveExpectedState","outputs":[{"components":[{"name":"dockerSha","type":"bytes"},{"name":"dockerName","type":"string"},{"name":"chainSpecSha","type":"bytes"},{"name":"chainSpecUrl","type":"string"},{"name":"isSigning","type":"bool"},{"name":"updateIntroduced","type":"uint256"},{"name":"updateConfirmed","type":"uint256"}],"name":"","type":"tuple"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"owner","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"isOwner","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[{"name":"_targetValidator","type":"address"}],"name":"isUpdateConfirmed","outputs":[{"name":"","type":"bool"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":true,"inputs":[],"name":"nodeControlDb","outputs":[{"name":"","type":"address"}],"payable":false,"stateMutability":"view","type":"function"},{"constant":false,"inputs":[{"name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"payable":false,"stateMutability":"nonpayable","type":"function"},{"inputs":[{"name":"_nodeControlDb","type":"address"},{"name":"_owner","type":"address"}],"payable":false,"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"name":"previousOwner","type":"address"},{"indexed":true,"name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"name":"_targetValidator","type":"address"}],"name":"UpdateAvailable","type":"event"}],"bytecode":"60806040523480156200001157600080fd5b5060405160408062001777833981018060405262000033919081019062000158565b60008054600160a060020a0319163317808255604051600160a060020a0391909116919060008051602062001757833981519152908290a360018054600160a060020a031916600160a060020a0384161790556200009a81640100000000620000a2810204565b505062000238565b600160a060020a038116620000ee576040517f08c379a0000000000000000000000000000000000000000000000000000000008152600401620000e590620001d2565b60405180910390fd5b60008054604051600160a060020a03808516939216916000805160206200175783398151915291a360008054600160a060020a031916600160a060020a0392909216919091179055565b8051620001458162000213565b92915050565b805162000145816200022d565b600080604083850312156200016c57600080fd5b60006200017a85856200014b565b92505060206200018d8582860162000138565b9150509250929050565b6000620001a6601f83620001e4565b7f4e6577206f776e657220616464726573732063616e6e6f742062652030783000815260200192915050565b60208082528101620001458162000197565b90815260200190565b6000620001458262000207565b60006200014582620001ed565b600160a060020a031690565b6200021e81620001ed565b81146200022a57600080fd5b50565b6200021e81620001fa565b61150f80620002486000396000f3fe608060405234801561001057600080fd5b50600436106100c0576000357c0100000000000000000000000000000000000000000000000000000000900480638da5cb5b11610093578063b71da0d111610078578063b71da0d11461013d578063ec26261114610150578063f2fde38b14610165576100c0565b80638da5cb5b146101135780638f32d59b14610128576100c0565b806312127ed7146100c55780633f67c333146100da578063715018a6146100e257806389c3ce1e146100ea575b600080fd5b6100d86100d3366004610ef6565b610178565b005b6100d8610865565b6100d86109b6565b6100fd6100f8366004610ed0565b610a4b565b60405161010a91906113ca565b60405180910390f35b61011b610aff565b60405161010a91906112dc565b610130610b0e565b60405161010a919061136e565b61013061014b366004610ed0565b610b1f565b610158610bbf565b60405161010a919061137c565b6100d8610173366004610ed0565b610bce565b610180610b0e565b6101bf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101b69061139a565b60405180910390fd5b6002856040516101cf91906112d0565b602060405180830381855afa1580156101ec573d6000803e3d6000fd5b5050506040513d601f19601f8201168201806040525061020f9190810190610ffb565b6001546040517ffbd74f84000000000000000000000000000000000000000000000000000000008152600291600160a060020a03169063fbd74f8490610259908b906004016112dc565b60006040518083038186803b15801561027157600080fd5b505afa158015610285573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526102ad9190810190611019565b6040516102ba91906112d0565b602060405180830381855afa1580156102d7573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506102fa9190810190610ffb565b14801561043f575060028460405161031291906112d0565b602060405180830381855afa15801561032f573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506103529190810190610ffb565b6001546040517fa999809f000000000000000000000000000000000000000000000000000000008152600291600160a060020a03169063a999809f9061039c908b906004016112dc565b60006040518083038186803b1580156103b457600080fd5b505afa1580156103c8573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526103f09190810190611019565b6040516103fd91906112d0565b602060405180830381855afa15801561041a573d6000803e3d6000fd5b5050506040513d601f19601f8201168201806040525061043d9190810190610ffb565b145b8015610583575060028360405161045691906112d0565b602060405180830381855afa158015610473573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506104969190810190610ffb565b6001546040517f70a05b18000000000000000000000000000000000000000000000000000000008152600291600160a060020a0316906370a05b18906104e0908b906004016112dc565b60006040518083038186803b1580156104f857600080fd5b505afa15801561050c573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526105349190810190611019565b60405161054191906112d0565b602060405180830381855afa15801561055e573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506105819190810190610ffb565b145b80156106c7575060028260405161059a91906112d0565b602060405180830381855afa1580156105b7573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506105da9190810190610ffb565b6001546040517f32d91c0e000000000000000000000000000000000000000000000000000000008152600291600160a060020a0316906332d91c0e90610624908b906004016112dc565b60006040518083038186803b15801561063c57600080fd5b505afa158015610650573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526106789190810190611019565b60405161068591906112d0565b602060405180830381855afa1580156106a2573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506106c59190810190610ffb565b145b801561076d57506001546040517fee7ee0fd00000000000000000000000000000000000000000000000000000000815282151591600160a060020a03169063ee7ee0fd90610719908a906004016112dc565b60206040518083038186803b15801561073157600080fd5b505afa158015610745573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506107699190810190610fdd565b1515145b156107a4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101b6906113aa565b6001546040517feab7ad92000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063eab7ad92906107f7908990899089908990899089906004016112f8565b600060405180830381600087803b15801561081157600080fd5b505af1158015610825573d6000803e3d6000fd5b5050604051600160a060020a03891692507fc9e49a024d50440c73d2d12d0ae05064094dca76b46dc95e99ea6848eb8f27e99150600090a2505050505050565b6001546040517ffbd74f84000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063fbd74f84906108ae9033906004016112ea565b60006040518083038186803b1580156108c657600080fd5b505afa1580156108da573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109029190810190611019565b51610939576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101b6906113ba565b6001546040517f954029c9000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063954029c9906109829033906004016112ea565b600060405180830381600087803b15801561099c57600080fd5b505af11580156109b0573d6000803e3d6000fd5b50505050565b6109be610b0e565b6109f4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101b69061139a565b60008054604051600160a060020a03909116907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908390a36000805473ffffffffffffffffffffffffffffffffffffffff19169055565b610a53610cc0565b610a5b610cc0565b6001546040517f1bab58f5000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631bab58f590610aa49086906004016112dc565b60006040518083038186803b158015610abc57600080fd5b505afa158015610ad0573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610af8919081019061104e565b9392505050565b600054600160a060020a031690565b600054600160a060020a0316331490565b6001546040517fb71da0d1000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169063b71da0d190610b699085906004016112dc565b60206040518083038186803b158015610b8157600080fd5b505afa158015610b95573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610bb99190810190610fdd565b92915050565b600154600160a060020a031681565b610bd6610b0e565b610c0c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101b69061139a565b610c1581610c18565b50565b600160a060020a038116610c58576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101b69061138a565b60008054604051600160a060020a03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b6040518060e001604052806060815260200160608152602001606081526020016060815260200160001515815260200160008152602001600081525090565b8035610bb9816114af565b8035610bb9816114c3565b8051610bb9816114c3565b8051610bb9816114cc565b600082601f830112610d3c57600080fd5b8151610d4f610d4a82611402565b6113db565b91508082526020830160208301858383011115610d6b57600080fd5b610d76838284611479565b50505092915050565b600082601f830112610d9057600080fd5b8135610d9e610d4a82611402565b91508082526020830160208301858383011115610dba57600080fd5b610d7683828461146d565b600060e08284031215610dd757600080fd5b610de160e06113db565b825190915067ffffffffffffffff811115610dfb57600080fd5b610e0784828501610d2b565b825250602082015167ffffffffffffffff811115610e2457600080fd5b610e3084828501610d2b565b602083015250604082015167ffffffffffffffff811115610e5057600080fd5b610e5c84828501610d2b565b604083015250606082015167ffffffffffffffff811115610e7c57600080fd5b610e8884828501610d2b565b6060830152506080610e9c84828501610d15565b60808301525060a0610eb084828501610d20565b60a08301525060c0610ec484828501610d20565b60c08301525092915050565b600060208284031215610ee257600080fd5b6000610eee8484610cff565b949350505050565b60008060008060008060c08789031215610f0f57600080fd5b6000610f1b8989610cff565b965050602087013567ffffffffffffffff811115610f3857600080fd5b610f4489828a01610d7f565b955050604087013567ffffffffffffffff811115610f6157600080fd5b610f6d89828a01610d7f565b945050606087013567ffffffffffffffff811115610f8a57600080fd5b610f9689828a01610d7f565b935050608087013567ffffffffffffffff811115610fb357600080fd5b610fbf89828a01610d7f565b92505060a0610fd089828a01610d0a565b9150509295509295509295565b600060208284031215610fef57600080fd5b6000610eee8484610d15565b60006020828403121561100d57600080fd5b6000610eee8484610d20565b60006020828403121561102b57600080fd5b815167ffffffffffffffff81111561104257600080fd5b610eee84828501610d2b565b60006020828403121561106057600080fd5b815167ffffffffffffffff81111561107757600080fd5b610eee84828501610dc5565b61108c8161145b565b82525050565b61108c8161143c565b61108c81611447565b60006110af8261142a565b6110b9818561142e565b93506110c9818560208601611479565b6110d2816114a5565b9093019392505050565b60006110e78261142a565b6110f18185611437565b9350611101818560208601611479565b9290920192915050565b61108c81611462565b6000611121601f8361142e565b7f4e6577206f776e657220616464726573732063616e6e6f742062652030783000815260200192915050565b600061115a60138361142e565b7f53656e646572206973206e6f74206f776e657200000000000000000000000000815260200192915050565b600061119360258361142e565b7f4572726f723a204e6f206368616e67657320696e20746865207061737365642081527f5374617465000000000000000000000000000000000000000000000000000000602082015260400192915050565b60006111f2601f8361142e565b7f4572726f723a20596f7520617265206e6f7420612076616c696461746f722100815260200192915050565b805160e08084526000919084019061123682826110a4565b9150506020830151848203602086015261125082826110a4565b9150506040830151848203604086015261126a82826110a4565b9150506060830151848203606086015261128482826110a4565b9150506080830151611299608086018261109b565b5060a08301516112ac60a08601826112c7565b5060c08301516112bf60c08601826112c7565b509392505050565b61108c8161144c565b6000610af882846110dc565b60208101610bb98284611092565b60208101610bb98284611083565b60c081016113068289611092565b818103602083015261131881886110a4565b9050818103604083015261132c81876110a4565b9050818103606083015261134081866110a4565b9050818103608083015261135481856110a4565b905061136360a083018461109b565b979650505050505050565b60208101610bb9828461109b565b60208101610bb9828461110b565b60208082528101610bb981611114565b60208082528101610bb98161114d565b60208082528101610bb981611186565b60208082528101610bb9816111e5565b60208082528101610af8818461121e565b60405181810167ffffffffffffffff811182821017156113fa57600080fd5b604052919050565b600067ffffffffffffffff82111561141957600080fd5b506020601f91909101601f19160190565b5190565b90815260200190565b919050565b6000610bb98261144f565b151590565b90565b600160a060020a031690565b6000610bb9825b6000610bb98261143c565b82818337506000910152565b60005b8381101561149457818101518382015260200161147c565b838111156109b05750506000910152565b601f01601f191690565b6114b88161143c565b8114610c1557600080fd5b6114b881611447565b6114b88161144c56fea265627a7a723058209b8585097306b913ec9052b4e139e7a3942549bb5eb6a4b93044981946fb4e066c6578706572696d656e74616cf500378be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0","contractName":"NodeControlSimple","deployedBytecode":"608060405234801561001057600080fd5b50600436106100c0576000357c0100000000000000000000000000000000000000000000000000000000900480638da5cb5b11610093578063b71da0d111610078578063b71da0d11461013d578063ec26261114610150578063f2fde38b14610165576100c0565b80638da5cb5b146101135780638f32d59b14610128576100c0565b806312127ed7146100c55780633f67c333146100da578063715018a6146100e257806389c3ce1e146100ea575b600080fd5b6100d86100d3366004610ef6565b610178565b005b6100d8610865565b6100d86109b6565b6100fd6100f8366004610ed0565b610a4b565b60405161010a91906113ca565b60405180910390f35b61011b610aff565b60405161010a91906112dc565b610130610b0e565b60405161010a919061136e565b61013061014b366004610ed0565b610b1f565b610158610bbf565b60405161010a919061137c565b6100d8610173366004610ed0565b610bce565b610180610b0e565b6101bf576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101b69061139a565b60405180910390fd5b6002856040516101cf91906112d0565b602060405180830381855afa1580156101ec573d6000803e3d6000fd5b5050506040513d601f19601f8201168201806040525061020f9190810190610ffb565b6001546040517ffbd74f84000000000000000000000000000000000000000000000000000000008152600291600160a060020a03169063fbd74f8490610259908b906004016112dc565b60006040518083038186803b15801561027157600080fd5b505afa158015610285573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526102ad9190810190611019565b6040516102ba91906112d0565b602060405180830381855afa1580156102d7573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506102fa9190810190610ffb565b14801561043f575060028460405161031291906112d0565b602060405180830381855afa15801561032f573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506103529190810190610ffb565b6001546040517fa999809f000000000000000000000000000000000000000000000000000000008152600291600160a060020a03169063a999809f9061039c908b906004016112dc565b60006040518083038186803b1580156103b457600080fd5b505afa1580156103c8573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526103f09190810190611019565b6040516103fd91906112d0565b602060405180830381855afa15801561041a573d6000803e3d6000fd5b5050506040513d601f19601f8201168201806040525061043d9190810190610ffb565b145b8015610583575060028360405161045691906112d0565b602060405180830381855afa158015610473573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506104969190810190610ffb565b6001546040517f70a05b18000000000000000000000000000000000000000000000000000000008152600291600160a060020a0316906370a05b18906104e0908b906004016112dc565b60006040518083038186803b1580156104f857600080fd5b505afa15801561050c573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526105349190810190611019565b60405161054191906112d0565b602060405180830381855afa15801561055e573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506105819190810190610ffb565b145b80156106c7575060028260405161059a91906112d0565b602060405180830381855afa1580156105b7573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506105da9190810190610ffb565b6001546040517f32d91c0e000000000000000000000000000000000000000000000000000000008152600291600160a060020a0316906332d91c0e90610624908b906004016112dc565b60006040518083038186803b15801561063c57600080fd5b505afa158015610650573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526106789190810190611019565b60405161068591906112d0565b602060405180830381855afa1580156106a2573d6000803e3d6000fd5b5050506040513d601f19601f820116820180604052506106c59190810190610ffb565b145b801561076d57506001546040517fee7ee0fd00000000000000000000000000000000000000000000000000000000815282151591600160a060020a03169063ee7ee0fd90610719908a906004016112dc565b60206040518083038186803b15801561073157600080fd5b505afa158015610745573d6000803e3d6000fd5b505050506040513d601f19601f820116820180604052506107699190810190610fdd565b1515145b156107a4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101b6906113aa565b6001546040517feab7ad92000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063eab7ad92906107f7908990899089908990899089906004016112f8565b600060405180830381600087803b15801561081157600080fd5b505af1158015610825573d6000803e3d6000fd5b5050604051600160a060020a03891692507fc9e49a024d50440c73d2d12d0ae05064094dca76b46dc95e99ea6848eb8f27e99150600090a2505050505050565b6001546040517ffbd74f84000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063fbd74f84906108ae9033906004016112ea565b60006040518083038186803b1580156108c657600080fd5b505afa1580156108da573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f191682016040526109029190810190611019565b51610939576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101b6906113ba565b6001546040517f954029c9000000000000000000000000000000000000000000000000000000008152600160a060020a039091169063954029c9906109829033906004016112ea565b600060405180830381600087803b15801561099c57600080fd5b505af11580156109b0573d6000803e3d6000fd5b50505050565b6109be610b0e565b6109f4576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101b69061139a565b60008054604051600160a060020a03909116907f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e0908390a36000805473ffffffffffffffffffffffffffffffffffffffff19169055565b610a53610cc0565b610a5b610cc0565b6001546040517f1bab58f5000000000000000000000000000000000000000000000000000000008152600160a060020a0390911690631bab58f590610aa49086906004016112dc565b60006040518083038186803b158015610abc57600080fd5b505afa158015610ad0573d6000803e3d6000fd5b505050506040513d6000823e601f3d908101601f19168201604052610af8919081019061104e565b9392505050565b600054600160a060020a031690565b600054600160a060020a0316331490565b6001546040517fb71da0d1000000000000000000000000000000000000000000000000000000008152600091600160a060020a03169063b71da0d190610b699085906004016112dc565b60206040518083038186803b158015610b8157600080fd5b505afa158015610b95573d6000803e3d6000fd5b505050506040513d601f19601f82011682018060405250610bb99190810190610fdd565b92915050565b600154600160a060020a031681565b610bd6610b0e565b610c0c576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101b69061139a565b610c1581610c18565b50565b600160a060020a038116610c58576040517f08c379a00000000000000000000000000000000000000000000000000000000081526004016101b69061138a565b60008054604051600160a060020a03808516939216917f8be0079c531659141344cd1fd0a4f28419497f9722a3daafe3b4186f6b6457e091a36000805473ffffffffffffffffffffffffffffffffffffffff1916600160a060020a0392909216919091179055565b6040518060e001604052806060815260200160608152602001606081526020016060815260200160001515815260200160008152602001600081525090565b8035610bb9816114af565b8035610bb9816114c3565b8051610bb9816114c3565b8051610bb9816114cc565b600082601f830112610d3c57600080fd5b8151610d4f610d4a82611402565b6113db565b91508082526020830160208301858383011115610d6b57600080fd5b610d76838284611479565b50505092915050565b600082601f830112610d9057600080fd5b8135610d9e610d4a82611402565b91508082526020830160208301858383011115610dba57600080fd5b610d7683828461146d565b600060e08284031215610dd757600080fd5b610de160e06113db565b825190915067ffffffffffffffff811115610dfb57600080fd5b610e0784828501610d2b565b825250602082015167ffffffffffffffff811115610e2457600080fd5b610e3084828501610d2b565b602083015250604082015167ffffffffffffffff811115610e5057600080fd5b610e5c84828501610d2b565b604083015250606082015167ffffffffffffffff811115610e7c57600080fd5b610e8884828501610d2b565b6060830152506080610e9c84828501610d15565b60808301525060a0610eb084828501610d20565b60a08301525060c0610ec484828501610d20565b60c08301525092915050565b600060208284031215610ee257600080fd5b6000610eee8484610cff565b949350505050565b60008060008060008060c08789031215610f0f57600080fd5b6000610f1b8989610cff565b965050602087013567ffffffffffffffff811115610f3857600080fd5b610f4489828a01610d7f565b955050604087013567ffffffffffffffff811115610f6157600080fd5b610f6d89828a01610d7f565b945050606087013567ffffffffffffffff811115610f8a57600080fd5b610f9689828a01610d7f565b935050608087013567ffffffffffffffff811115610fb357600080fd5b610fbf89828a01610d7f565b92505060a0610fd089828a01610d0a565b9150509295509295509295565b600060208284031215610fef57600080fd5b6000610eee8484610d15565b60006020828403121561100d57600080fd5b6000610eee8484610d20565b60006020828403121561102b57600080fd5b815167ffffffffffffffff81111561104257600080fd5b610eee84828501610d2b565b60006020828403121561106057600080fd5b815167ffffffffffffffff81111561107757600080fd5b610eee84828501610dc5565b61108c8161145b565b82525050565b61108c8161143c565b61108c81611447565b60006110af8261142a565b6110b9818561142e565b93506110c9818560208601611479565b6110d2816114a5565b9093019392505050565b60006110e78261142a565b6110f18185611437565b9350611101818560208601611479565b9290920192915050565b61108c81611462565b6000611121601f8361142e565b7f4e6577206f776e657220616464726573732063616e6e6f742062652030783000815260200192915050565b600061115a60138361142e565b7f53656e646572206973206e6f74206f776e657200000000000000000000000000815260200192915050565b600061119360258361142e565b7f4572726f723a204e6f206368616e67657320696e20746865207061737365642081527f5374617465000000000000000000000000000000000000000000000000000000602082015260400192915050565b60006111f2601f8361142e565b7f4572726f723a20596f7520617265206e6f7420612076616c696461746f722100815260200192915050565b805160e08084526000919084019061123682826110a4565b9150506020830151848203602086015261125082826110a4565b9150506040830151848203604086015261126a82826110a4565b9150506060830151848203606086015261128482826110a4565b9150506080830151611299608086018261109b565b5060a08301516112ac60a08601826112c7565b5060c08301516112bf60c08601826112c7565b509392505050565b61108c8161144c565b6000610af882846110dc565b60208101610bb98284611092565b60208101610bb98284611083565b60c081016113068289611092565b818103602083015261131881886110a4565b9050818103604083015261132c81876110a4565b9050818103606083015261134081866110a4565b9050818103608083015261135481856110a4565b905061136360a083018461109b565b979650505050505050565b60208101610bb9828461109b565b60208101610bb9828461110b565b60208082528101610bb981611114565b60208082528101610bb98161114d565b60208082528101610bb981611186565b60208082528101610bb9816111e5565b60208082528101610af8818461121e565b60405181810167ffffffffffffffff811182821017156113fa57600080fd5b604052919050565b600067ffffffffffffffff82111561141957600080fd5b506020601f91909101601f19160190565b5190565b90815260200190565b919050565b6000610bb98261144f565b151590565b90565b600160a060020a031690565b6000610bb9825b6000610bb98261143c565b82818337506000910152565b60005b8381101561149457818101518382015260200161147c565b838111156109b05750506000910152565b601f01601f191690565b6114b88161143c565b8114610c1557600080fd5b6114b881611447565b6114b88161144c56fea265627a7a723058209b8585097306b913ec9052b4e139e7a3942549bb5eb6a4b93044981946fb4e066c6578706572696d656e74616cf50037","source":"pragma solidity ^0.5.0;\npragma experimental ABIEncoderV2;\n\nimport \"../interfaces/INodeControl.sol\";\nimport \"./NodeControlDb.sol\";\nimport \"../misc/Ownable.sol\";\n\n\ncontract NodeControlSimple is INodeControl, Ownable {\n\n    NodeControlDb public nodeControlDb;\n\n    /// @notice Constructor\n    /// @param _nodeControlDb The db contract that should be used\n    constructor(NodeControlDb _nodeControlDb, address _owner)\n        public \n    {\n        nodeControlDb = _nodeControlDb;\n        _transferOwnership(_owner);\n    }\n\n    /// @notice Lets the validator confirm the update\n    function confirmUpdate() \n        external \n    {\n        require(nodeControlDb.getDockerSha(msg.sender).length != 0, \"Error: You are not a validator!\");\n        nodeControlDb.setUpdateConfirmed(msg.sender);\n    }\n\n    /// @notice Returns the expected state of a validator\n    /// @param _targetValidator The validator whos state you want\n    /// @return The state of the validator\n    function retrieveExpectedState(address _targetValidator) \n        external \n        view \n        returns (ValidatorState memory) \n    {\n        ValidatorState memory vs = nodeControlDb.getState(_targetValidator);\n        return vs;\n    }\n\n    /// @notice View method to check if an update was confirmed by the validator\n    /// @param _targetValidator The validator that is supposed to be checked\n    function isUpdateConfirmed(address _targetValidator) \n        external \n        view \n        returns(bool) \n    {\n        return nodeControlDb.isUpdateConfirmed(_targetValidator);\n    }\n\n    /// @notice Sets the state for a validator and emits update event\n    /// @param _targetValidator The validator whos state needs to be updated\n    /// @param _dockerSha The sha of the dockerfile\n    /// @param _dockerName The name of the dockerfile\n    /// @param _chainSpecSha The sha of the chainSpecFile\n    /// @param _chainSpecUrl The url where the chainSpecFile can be found\n    /// @param _isSigning Indicates if the validator shall sign blocks\n    function updateValidator(\n        address _targetValidator, \n        bytes memory _dockerSha, \n        string memory _dockerName, \n        bytes memory _chainSpecSha,\n        string memory _chainSpecUrl,\n        bool _isSigning\n    ) \n        public \n        onlyOwner \n    {\n        require(\n            !(sha256(bytes(nodeControlDb.getDockerSha(_targetValidator))) == \n            sha256(bytes(_dockerSha)) && sha256(bytes(nodeControlDb.getDockerName(_targetValidator))) == \n            sha256(bytes(_dockerName)) && sha256(bytes(nodeControlDb.getChainSpecSha(_targetValidator))) == \n            sha256(bytes(_chainSpecSha)) && sha256(bytes(nodeControlDb.getChainSpecUrl(_targetValidator))) == \n            sha256(bytes(_chainSpecUrl)) && nodeControlDb.getIsSigning(_targetValidator) == _isSigning), \n            \"Error: No changes in the passed State\"\n        );\n        \n        nodeControlDb.setState(\n            _targetValidator, \n            _dockerSha, \n            _dockerName, \n            _chainSpecSha, \n            _chainSpecUrl, \n            _isSigning\n        );\n\n        emit UpdateAvailable(_targetValidator);\n    }\n}\n","networks":"{}"}